import os

langs = ['c', 'wat']
data_path = 'data/WASM_all/'
json_str_start = '{\"repo_name\":\"repo\",\"ref\":\"refs/heads/master\",\"path\":\"a.c\",\"copies\":\"1\",'
# Transcoder_path = '/mnt/c/TransCoder/'
Transcoder_path = '/home/ubuntu/wasm_decompiler/TransCoder/'
to_delete = [403792, 403525, 403392, 403333, 403192, 401800, 400516, 400457, 399947, 399932, 399487, 397987, 396090, 395943, 395727, 395492, 395464, 395462, 395456, 395448, 395447, 395446, 395445, 395444, 395424, 394842, 394745, 390640, 390235, 390234, 390218, 390217, 389308, 387720, 387030, 386749, 386580, 386100, 385925, 385726, 383808, 383484, 383482, 380260, 379576, 379572, 379558, 379545, 379423, 379355, 379351, 379349, 379347, 379341, 377878, 377486, 376013, 376012, 374724, 374723, 374722, 374715, 374712, 374710, 374704, 374701, 374671, 374529, 374065, 374046, 374044, 372500, 372478, 372360, 372359, 372358, 372354, 372346, 372342, 372340, 372338, 372337, 372336, 371890, 369883, 369754, 369384, 368641, 368581, 368400, 368263, 366392, 366344, 366296, 366248, 366200, 366183, 366143, 366087, 366077, 366025, 365374, 365371, 365323, 365298, 365217, 364572, 364548, 364545, 364543, 364538, 364459, 364453, 364378, 364314, 363108, 363047, 362980, 362978, 362514, 362504, 362093, 362084, 361951, 361908, 358730, 358616, 358367, 358366, 358365, 358364, 356409, 356276, 356273, 356250, 355457, 354875, 354697, 354088, 353670, 353610, 353574, 353573, 353262, 353257, 353244, 353160, 353105, 352981, 352971, 352951, 350378, 350252, 350246, 350004, 349358, 349321, 349318, 349267, 349264, 349214, 349115, 349073, 349050, 349047, 348965, 348938, 348848, 348845, 348799, 348729, 348710, 348707, 348658, 348573, 348531, 348508, 348505, 348423, 348396, 348302, 348301, 348295, 348293, 348292, 348291, 348285, 348283, 348279, 348272, 348271, 348270, 348228, 348115, 348114, 347677, 347671, 347512, 347470, 347411, 344142, 343540, 343517, 343246, 343245, 343243, 343238, 343237, 343212, 342999, 342792, 342791, 342680, 339832, 339765, 338091, 337766, 337763, 336651, 334056, 333547, 333546, 333504, 332928, 332927, 332922, 332918, 332916, 332913, 332910, 332907, 332906, 332905, 332899, 332898, 332894, 332851, 332847, 332313, 332253, 331846, 330304, 330079, 330077, 330054, 330051, 329985, 327966, 327892, 327659, 327589, 327584, 327532, 326009, 325338, 324179, 323490, 323473, 323472, 323471, 323470, 323469, 323468, 323467, 323439, 322705, 321528, 321383, 319139, 318956, 318773, 318590, 318211, 318155, 318152, 318130, 318122, 317611, 317486, 317276, 317275, 317266, 316683, 316681, 316679, 316677, 316675, 316673, 316671, 316669, 316667, 316665, 316655, 316340, 316011, 315650, 314339, 313558, 312670, 309630, 309308, 309298, 309295, 309167, 308590, 308589, 308349, 308093, 308076, 308073, 307944, 307609, 304889, 303616, 302224, 300408, 300363, 299525, 299508, 299500, 299409, 298626, 298434, 298418, 298415, 298386, 298355, 298306, 298298, 298254, 297642, 297499, 296507, 296463, 294088, 294002, 293767, 293659, 292217, 291919, 291842, 291789, 291724, 291723, 291722, 291721, 291718, 291717, 291713, 291712, 291711, 291702, 291701, 291698, 291697, 291693, 291692, 291689, 291688, 288115, 288107, 288100, 288077, 288068, 288066, 287992, 287736, 287529, 286458, 286453, 283837, 283832, 283169, 278963, 277860, 277854, 277849, 277848, 277847, 277846, 277688, 277357, 276135, 275830, 275720, 275190, 274942, 274480, 274059, 273472, 273431, 271618, 271361, 271343, 270448, 270446, 270107, 269358, 269356, 269338, 269024, 269020, 269016, 268991, 268989, 268944, 268943, 268718, 268717, 268716, 268715, 268714, 268713, 268391, 268389, 267719, 267716, 267239, 267201, 267195, 267194, 267188, 267177, 267174, 266994, 266776, 266509, 265835, 263792, 263585, 263033, 263011, 262743, 262548, 262536, 261412, 260537, 260536, 260533, 260527, 260525, 260523, 260245, 260221, 259539, 259009, 259006, 259001, 259000, 258999, 258997, 258996, 258995, 258994, 258993, 258992, 258991, 258990, 258989, 255438, 255398, 254247, 254244, 254166, 252791, 252788, 252783, 252366, 248405, 247207, 246187, 245962, 245868, 245703, 245258, 244482, 243196, 242932, 242923, 242783, 241126, 240901, 237773, 234763, 234762, 234709, 234602, 234515, 234170, 233338, 232422, 231932, 231907, 231018, 230947, 230429, 230187, 230106, 230101, 230099, 230098, 230097, 230096, 230095, 230094, 230093, 230092, 230091, 230090, 225973, 225867, 225575, 224523, 224499, 223702, 223152, 223143, 222828, 222818, 222815, 222813, 222812, 222811, 222810, 222809, 222808, 222807, 222717, 222716, 222493, 222477, 222474, 222445, 220179, 220142, 218516, 218515, 218477, 218474, 218375, 218374, 217366, 217359, 217325, 217304, 217289, 216032, 215908, 215907, 215836, 215805, 215755, 215752, 215751, 215743, 215741, 215730, 215720, 215705, 215682, 215583, 215582, 215581, 214408, 213541, 213071, 212984, 212979, 212976, 212729, 211408, 211271, 211252, 208179, 208177, 208113, 207978, 207971, 207943, 207933, 207931, 207929, 207928, 207926, 207919, 207916, 207915, 207329, 205555, 205001, 204248, 204150, 204149, 203624, 203181, 203178, 203173, 202508, 200725, 200716, 200428, 200426, 200414, 200394, 200388, 196665, 196654, 196653, 196652, 196646, 196645, 196640, 196638, 196623, 196601, 196462, 196460, 196458, 195176, 195171, 195170, 195169, 195168, 195165, 195156, 195085, 195084, 194804, 194740, 194642, 194520, 193322, 193318, 193311, 193280, 192576, 191277, 191275, 190417, 190415, 190413, 189362, 189320, 189317, 189316, 189219, 189101, 188164, 188161, 188160, 188153, 184039, 184014, 183190, 183140, 183099, 182761, 182580, 181339, 181337, 179738, 177745, 177740, 177413, 176992, 176991, 176523, 176521, 176481, 176471, 176460, 176220, 176218, 175775, 175636, 175521, 174090, 173998, 173050, 172705, 172702, 172593, 172387, 172293, 172273, 171268, 171170, 170985, 167799, 164192, 162239, 161045, 161044, 160824, 160820, 160718, 160364, 160247, 159600, 159268, 159253, 159217, 156293, 156260, 156255, 156060, 155355, 153996, 153979, 153674, 152943, 151484, 151415, 150994, 150962, 150957, 150789, 150743, 150539, 150253, 149471, 145729, 144877, 144826, 144823, 144822, 144821, 144818, 144527, 143771, 143754, 143255, 143010, 142975, 142972, 142680, 142391, 142388, 142357, 141892, 141853, 140161, 140158, 139423, 139408, 139407, 139360, 139355, 139353, 139351, 139346, 139345, 139338, 139337, 139335, 139334, 139333, 139330, 139329, 139319, 139304, 139294, 139271, 139268, 139267, 139253, 139236, 139218, 139214, 138798, 138562, 137847, 136397, 136182, 134870, 134839, 133538, 133537, 133536, 133100, 131428, 129454, 129195, 128995, 128868, 128291, 128286, 126420, 126405, 126173, 125793, 125790, 125782, 125716, 125709, 125622, 125617, 125613, 125606, 125605, 125559, 125550, 125547, 125538, 125534, 125440, 124764, 124672, 123292, 123288, 122609, 122594, 122587, 122586, 122580, 122563, 122562, 122556, 122539, 122538, 122532, 122517, 122516, 122503, 122501, 122418, 122216, 122215, 122195, 122194, 122057, 122051, 122044, 122002, 121998, 121947, 121946, 121924, 121898, 121298, 121297, 121273, 121118, 121092, 120728, 120726, 120719, 120678, 120639, 120618, 120425, 120423, 120418, 120334, 120330, 120326, 120301, 120299, 120254, 120253, 120076, 119776, 119625, 119608, 119602, 119585, 115664, 115663, 115649, 115648, 115647, 115644, 115642, 115640, 115635, 115634, 115633, 115617, 115615, 115614, 115613, 115612, 115609, 114491, 114487, 114481, 114477, 111209, 111179, 111176, 110367, 110363, 109383, 109382, 108360, 108358, 108353, 108352, 107349, 107337, 105891, 105591, 103247, 103211, 103154, 101479, 97447, 97226, 97191, 97190, 96335, 95002, 95001, 94999, 94825, 94690, 94689, 94442, 94351, 93939, 91332, 88541, 88340, 87851, 87798, 85028, 85025, 84836, 84300, 84279, 84254, 84251, 84051, 84049, 83424, 83104, 83049, 82990, 82279, 82201, 81819, 81288, 80912, 80906, 80905, 80898, 80831, 80809, 80298, 80277, 80272, 80265, 80188, 80094, 79425, 79333, 79327, 79324, 79315, 79309, 79306, 79300, 79297, 78884, 78779, 78692, 76841, 76524, 73186, 73023, 70262, 69809, 68237, 68235, 68233, 68230, 68225, 68223, 68221, 68219, 68217, 68216, 68214, 68211, 68209, 68207, 68205, 68204, 68069, 68066, 68064, 67935, 67443, 67435, 67398, 67360, 67336, 67333, 67074, 67073, 67071, 67064, 67062, 67061, 67060, 67059, 67058, 67057, 67056, 67055, 67054, 67050, 67049, 67048, 67047, 67046, 67045, 67044, 67043, 67042, 67041, 67040, 67039, 67038, 67037, 67036, 67032, 67031, 66257, 66024, 66000, 65923, 65919, 65918, 65202, 65200, 65196, 65057, 65056, 65055, 65054, 65053, 65052, 65051, 65050, 65049, 65048, 65007, 65006, 65005, 65004, 65003, 65002, 65001, 65000, 64999, 64998, 63913, 63680, 63670, 63633, 62126, 62119, 61589, 61222, 61221, 61051, 60947, 60946, 60928, 60731, 60513, 60491, 60352, 60351, 60350, 60346, 60344, 60343, 60341, 60339, 60338, 60337, 60325, 60324, 60323, 60320, 60317, 60314, 60312, 60311, 60310, 60302, 60301, 60294, 60293, 60288, 60286, 60285, 60284, 59919, 59918, 59917, 59913, 59911, 59910, 59908, 59906, 59905, 59904, 59892, 59891, 59890, 59887, 59884, 59881, 59879, 59878, 59877, 59869, 59868, 59861, 59860, 59855, 59853, 59852, 59851, 59812, 59793, 59177, 59157, 59148, 58779, 58569, 58111, 57793, 57787, 57151, 56656, 56611, 56609, 56608, 56607, 56606, 56603, 56602, 56598, 56597, 56596, 56592, 56591, 56588, 56587, 56586, 56584, 56580, 56579, 56576, 56575, 56553, 56550, 56549, 56548, 56545, 56532, 56531, 56530, 56529, 56528, 56527, 56526, 55794, 55788, 54929, 54924, 54922, 54909, 54570, 54561, 54558, 54557, 54553, 54549, 54547, 54543, 51931, 51653, 51302, 51285, 51277, 51191, 50627, 50559, 50359, 50201, 48794, 48791, 48790, 48787, 48786, 48779, 48721, 48718, 48717, 48711, 48652, 48649, 48648, 48642, 48598, 48595, 48594, 48591, 48590, 48583, 46839, 46784, 46474, 45628, 45627, 45626, 45243, 41820, 41420, 41418, 41373, 41372, 41194, 41193, 41101, 41100, 40905, 40570, 40237, 38228, 38226, 38181, 38180, 36643, 36620, 35244, 35227, 35130, 34421, 34420, 34352, 34351, 34347, 34346, 34339, 34318, 34305, 34287, 33209, 33017, 32848, 32553, 32536, 31134, 27225, 27223, 26530, 26527, 26503, 26499, 26498, 26496, 25781, 25780, 25753, 25117, 24207, 21702, 21374, 21372, 21370, 21332, 21237, 21235, 21205, 21102, 21101, 20557, 20555, 14994, 14839, 14821, 14815, 13361, 13045, 12267, 11084, 10667, 10144, 10143, 6994, 6992, 6834, 6828, 6822, 6809, 6667, 6482, 6481, 6016, 4934, 4933, 3524, 3523, 3522, 2981, 1943, 1920, 1648, 1620, 241]


def to_json_line(line):
    line = line[:-1] # remove \n
    return json_str_start + '\"language\":\"' + lang + '\",\"content\":\"' + line + '\"}\n'


if __name__ == '__main__':
    for lang in langs:
        if lang == 'c':
            path = Transcoder_path + data_path + 'c/hl_corpus_fixed'
        else:
            path = Transcoder_path + data_path + 'wat/ll_corpus_fixed'



        with open(path) as f:
            lines = f.readlines()

        for index in to_delete:
            del lines[index]

        # lines = list(map(to_json_line, lines))
        path = path + '.000.json'
        os.system('rm ' + path + '.gz')
        with open(path, 'w') as f2:
            f2.writelines(lines)

        os.system('gzip ' + path)